name: C++ Build Check

on:
  pull_request:
    branches: [ main ]

jobs:
  build:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
      
    - name: Show project structure
      run: find . -type f -name "*.cpp" -o -name "*.h" -o -name "makefile*" -o -name "Makefile*" | sort
      
    - name: Install compiler
      run: sudo apt-get update && sudo apt-get install -y g++ make
      
    - name: Try to compile Source.cpp
      run: |
        if [ -f "Source.cpp" ]; then
          g++ -o myprogram Source.cpp -Wall -Wextra -std=c++17
          echo "✓ Source.cpp compiled successfully"
        else
          echo "✗ Source.cpp not found"
          exit 1
        fi
        
    - name: Try makefile if exists
      run: |
        if [ -f "makefile_HW3" ] || [ -f "Makefile" ] || [ -f "makefile" ]; then
          make || echo "Make failed but continuing..."
        fi
